<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="AutoOS: Make Your OS More Powerful by Exploiting Large Language Models">
  <meta name="keywords" content="Large language model，OS，linux kernel，optimization">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> AutoOS: Make Your OS More Powerful by Exploiting Large Language Models</title>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <!-- highlight code -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>


  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/logo.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
</head>

<body>


  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">
                  AutoOS: Make Your OS More Powerful by Exploiting Large Language Models
            </h1>
              <div class="is-size-5 publication-authors">
                <span class="author-block">
                  <a>Huilai Chen</a><sup>1,2</sup>,</span>
                <span class="author-block">
                  <a>Yuanbo Wen</a><sup>1</sup>,</span>
                <span class="author-block">
                  <a>Limin Cheng</a><sup>3</sup>,</span>
                <span class="author-block">
                  <a>Shouxu Kuang</a><sup>2,3</sup>,</span>
                <span class="author-block">
                  <a>Yumeng Liu</a><sup>3</sup>,</span>
                <span class="author-block">
                  <a>Weijia Li</a><sup>2,3</sup>,</span>
                <span class="author-block">
                  <a>Ling Li</a><sup>3</sup>,</span>
                <span class="author-block">
                  <a>Rui Zhang</a><sup>1</sup>,</span>
                <span class="author-block">
                  <a>Xinkai Song</a><sup>1</sup>,</span>
                <span class="author-block">
                  <a>Wei Li</a><sup>1</sup>,</span>
                <span class="author-block">
                  <a>Qi Guo</a><sup>1</sup>,</span>
                <span class="author-block">
                  <a>Yunji Chen</a><sup>1</sup>
                </span>
              </div>

            <div class="is-size-5 publication-authors">
              <span class="author-block"><sup>1</sup>SKL of Processors, Institute of Computing Technology,
                CAS</span><br>
              <span class="author-block"><sup>2</sup>University of Chinese Academy of Sciences</span><br>
              <span class="author-block"><sup>3</sup>Intelligent Software Research Center, Institute of Software</span><br>
            </div>

            <div class="column has-text-centered">
              <div class="publication-links">
                <!-- PDF Link. -->
                <span class="link-block">
                  <a href="https://openreview.net/pdf?id=Rp8R9C0Sth" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="ai ai-arxiv"></i>
                    </span>
                    <span>paper</span>
                  </a>
                </span>
                <!-- Code Link. -->
                <span class="link-block">
                  <a href="https://github.com/xuewuyinhe/AutoOS" class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>             
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container is-max-desktop">
      <!-- Abstract. -->
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Abstract</h2>
          <div class="content has-text-justified">
            <p>
              With the rapid development of Artificial Intelligence of Things (AIoT), customizing and optimizing operating system (OS) kernel configurations
              for various AIoT application scenarios is crucial for maximizing system performance. However,
              existing approaches falter due to the overwhelming problem complexity (i.e., over 15,000 configuration options in the Linux kernel), together with
              the huge evaluation costs and error-prone options
              that may result in OS boot-up failure, which all
              make it an unresolved problem to optimize the
              Linux kernel automatically. In this paper, we introduce AutoOS, a novel framework exploiting
              Large Language Models for customizing and optimizing OS kernel configurations automatically
              for various AIoT application scenarios. Inspired
              by the inherently directory-structured kernel configuration process, we first formulate our research
              problem as optimizing on a dynamic tree. We
              then propose a novel framework integrating a state
              machine-based traversal algorithm as the observeprune-propose-act-correct loop, which can effectively refine the optimization space and ensure
              a successful OS boot-up. Experimental results
              show that AutoOS can automatically customize
              and optimize the OS kernel configurations without
              human effort. More importantly, AutoOS even
              achieves better performance by up to 25% than
              vendor-provided configuration.
            </p>
          </div>
        </div>
      </div>
      <!--/ Abstract. -->
      <!-- Overview. -->
      <div class="columns is-centered has-text-centered">
        <div class="column">
          <h2 class="title is-3">Background</h2>
          <div class="content">
            <p>
              Existing methods struggle with the complexity of over 15,000 configuration options in the Linux kernel, high evaluation costs, and potential errors that could cause OS boot failure, making automatic kernel optimization an unsolved problem. AutoOS first addresses this by leveraging expert knowledge within large language models (LLMs) to reduce the vast optimization space and detect errors that could prevent OS boot.
              However, directly using LLMs for configuration is impractical. For instance, (a) a simple request to ChatGPT to modify configuration options can only list a small number of settings, and (b) default Linux configuration files from vendors only show enabled options, lacking comprehensive insight.
            </p>
          </div>
          <img src="./static/images/back.png" style="width: 70%; height: auto;">
        </div>
      </div>
      <!--/ Overview. -->
    </div>
  </section>

  <section class="section">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column">
          <div class="content">
            <h2 class="title is-3"> Optimize OS kernel on a dynamic tree</h2>
            <p>
             AutoOS optimizes kernel configurations by modeling the problem as an optimization task on a dynamic tree structure (including directories and options), inspired by the directory layout of kernel configuration. It uses a state-machine-based traversal algorithm, which employs an observe-prune-propose-act-correct cycle to refine the optimization space. This method effectively narrows down the search space while ensuring successful OS boot by avoiding configurations that could lead to failures.
            </p>
            <p>
              An actual example of the optimization on the dynamic tree. (a) The AutoOS framework uses a state-machine-like prompt template with five stages to explore kernel configurations, optimize performance, and ensure successful OS boot-up. (b) An example of how the dynamic tree is traversed at a specific tree level to find optimal configurations.
            </p>
            <img src="./static/images/method.jpg">
            </p>
          </div>
        </div>
      </div>

      <div class="columns is-centered">
        <div class="column">
          <div class="content">
            <h2 class="title is-3"> Main Results </h2>
            <p>
              ​AutoOS was evaluated across three Linux distributions—PolyOS, Fedora, and Ubuntu—on two hardware platforms: a Hifive embedded development board (RISC-V architecture) and a PC with an Intel Core i7-13700F processor. The evaluation utilized UnixBench and LMbench benchmarks to assess performance improvements. 
            </p>
            <p>
              AutoOS outperforms both default configurations and LLM-Vanilla in AIoT scenarios, achieving performance improvements of up to 25.6% on Fedora and 8.4% on PolyOS. In the general-purpose scenario with Ubuntu, AutoOS achieves a 9.08% overall performance increase。
            <img src="./static/images/result1.jpg">
            </p>
            <img src="./static/images/result2.jpg">
          </div>
        </div>
      </div>


      <div class="columns is-centered">
        <div class="column">
          <div class="content">
            <h2 class="title is-3"> Possibility of Achieving Positive Results </h2>
            <p>
              AutoOS demonstrates its robustness on Fedora, exploring legal configurations in all 56 search trials, with 26.78% of trials surpassing the default performance. It consistently finds optimized configurations, with the best performance achieved within 24 trials.
            </p>
            <div style="text-align: center;">
              <img src="./static/images/prob.jpg" style="width: 65%; height: auto;">
            </div>
          </div>
        </div>
      </div>


      <div class="columns is-centered">
        <div class="column">
          <div class="content">
            <h2 class="title is-3"> Case Study of the Optimized OS Kernel Configuration </h2>
            <p>
              Here we present the configuration option modifications that led to a 25.6% performance enhancement for Fedora in our experiments. In the optimal configuration, AutoOS made modifications to a total of 45 kernel options, starting from the default settings. 
            </p>
            <div style="text-align: center;">
              <img src="./static/images/options.jpg">
            </div>
          </div>
        </div>
      </div>
      
      <!-- Method -->

      <div class="columns is-centered">
        <div class="column is-full-width">
          <h2 class="title is-3">Quick Start</h2>
          <pre style="width: 100%; overflow: auto; background: none;">
          <code class="bash" style="min-width: 100%; width: 0px; overflow: scroll; font-family: 'Cascadia Code', 'Menlo', 'Courier New', monospace;">
# You can use the following commands according to your own compiled OS environment to write a shell script that automates the process of searching, compiling, and installing.
# 0. Inspect the Linux kernel version and .config file of the OS distribution that needs optimization.
# 1. Prepare the corresponding Linux version's source code repository. Then, clone and download this project, placing all files within the Linux kernel source repository.
git clone https://github.com/torvalds/linux.git
cd linux
git clone https://github.com/xuewuyinhe/AutoOS.git
mv AutoOS/* ./

# 2. Copy the .config file from the OS distribution that needs optimization to the Linux version's source code repository, then change the name using the command below:
cp .config .config_base

# 3. Modify the ARCH and SRCARCH variable to your architecture name
echo "export srctree=." > init_env.sh
echo "export CC=gcc" >> init_env.sh
echo "export LD=ld" >> init_env.sh
echo "export ARCH=x86" >> init_env.sh
echo "export SRCARCH=x86" >> init_env.sh


# 4.  set the OpenAI API key
echo "your-openai-api-key" > key.txt

# 5. initial
source ./init_env.sh

# 6. run AutoOS
python3 AutoOS.py

# When first run it, the error message will appear as follows:
"kconfiglib.KconfigError: kernel/module/Kconfig:4: error: couldn't parse 'modules': unrecognized construct"

# To disable module functionality, delete the problematic code located under kernel/module/Kconfig (The place is according to the message). The code to remove is as follows:
'''
menuconfig MODULES
           bool "Enable loadable module support"
           modules
           help
             Kernel modules are small pieces of compiled code which can
             be inserted in the running kernel, rather than being
             permanently built into the kernel.  You use the "modprobe"
             tool to add (and sometimes remove) them.  If you say Y here,
             many parts of the kernel can be built as modules (by
             answering M instead of Y where indicated): this is most
             useful for infrequently used options which are not required
             for booting.  For more information, see the man pages for
             modprobe, lsmod, modinfo, insmod and rmmod.
   
             If you say Y here, you will need to run "make
             modules_install" to put the modules under /lib/modules/
             where modprobe can find them (you may need to be root to do
             this).
   
             If unsure, say Y.
'''
# run Autoos again
python3 AutoOS.py

# 7. Generate new config files using the command below,the newly generated configuration file is located at ./files/config
python3 append.py

# 8. Using the following command, load the newly generated ./files/config file, and then save it as ./.config in the current directory.
menuconfig ARCH=x86 (change riscv to the arch you use) 

# 9. Compile and install a new OS with the new config， then evaluate it using unixbench total score.

# Steps 6-9 constitute a single search, with 24-48 searches recommended. If the generated OS fails to boot, you can return the errors and modified options to your LLM for identification. If not successful, use a binary search to identify the problematic option . Remember the previously identified options and filter out those in subsequent generated configurations. The modified options in one search is in ./output.txt generated after running AutoOS.py. Remove the the problematic options in output.txt and run append.py again to generated a viable OS configuration
            </code>
          </pre>
        </div>
      </div>
    </div>
  
    <!-- <hr/> -->
    <!-- <section class="section" id="BibTeX"> -->
      <!-- <div class="columns is-centered"> -->
        <div class="container content is-max-desktop">
            <h2 class="title is-3"> BibTex </h2>
              <pre>
  <code class="nohighlight" style="background-color: transparent; color: black; font-family: monospace;">
@inproceedings{chen2024autoos,
   title={AutoOS: Make Your OS More Powerful by Exploiting Large Language Models},
   author={Huilai Chen and Yuanbo Wen and Limin Cheng and Shouxu Kuang and Yumeng Liu and Weijia Li and Ling Li and Rui Zhang and Xinkai Song and Wei Li and others},
   booktitle={Forty-first International Conference on Machine Learning},
   url={https://github.com/xuewuyinhe/AutoOS},
}
  </code>
              </pre>
      </div>
      <!-- </section> -->
  </section>

  <!-- <hr/> -->
  

  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">
            <p>
              This website is licensed under a <a rel="license"
                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
                Commons Attribution-ShareAlike 4.0 International License</a>.
            </p>
            <p>
              Thanks for the website template <a href="https://nerfies.github.io">Nerfies</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>

</body>

</html>
